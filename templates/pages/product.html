{% extends "base.html" %}
{% load catalog_tags %}

{% block page %}
	{% block content %}

        <div style="display:none">
            <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
        </div>

        <main id="product">

            {% with product_id="id"|addparam:product.id%}
            <div id="good-block-{{product.id}}" class="good-block product__block--position" data-json="{{ product_id|tojson }}" style="all: unset">
            {% endwith %}

                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb" style="background-color: white;">
                    <li class="breadcrumb-item"><a href="{% url 'catalog:products' %}">Каталог</a></li>
                    <li class="breadcrumb-item active" aria-current="page">{{product.name}}</li>
                    </ol>
                </nav>

                <div class="row justify-content-center" style="margin-bottom: 20px;">
                    <div class="col-4 product__block--indents">
                        <div class="product__block--position">

                            {% for image in product.get_images|slice:":1" %}
                                <a href="{{ image }}" class="thumbnail product__block__img--position">
                                    <img
                                        src="{{ image }}"
                                        class="img-fluid rounded"
                                        alt="{{ prod.name }}"
                                    >
                                </a>
                            {% empty %}
                                <img
                                    src="{{ MEDIA_URL }}/0.jpg"
                                    class="img-fluid rounded"
                                    alt="Пустое изображение"
                                >
                            {% endfor %}

                            <div class="row"> 
                                {% for image in product.get_images|slice:":10" %}
                                    <a href="{{ image }}">
                                        <img 
                                            src="{{ image }}"
                                            class="
                                                img-fluid
                                                img-thumbnail
                                                thumbnail-50
                                                product__thumbnail__block--design
                                                product__thumbnail__block--position"
                                            alt="{{ product.name }}"
                                        >
                                    </a>
                                {% endfor %} 
                            </div>
                        </div>

                    </div>
                    <div class="col-4 product__block--indents">
                        {% if product.articul %}
                            <p>Артикул:      <b> {{ product.articul }}</b></p>
                        {% else %}
                            <p>Артикул:      <b> -- </b></p>
                        {% endif %}
                        <p>Наименование: <b>{{ product.name }}</b></p>
                        &nbsp;
                        {% if product.collection.group %}
                            <p>Коллекция:    <b>{{ product.collection.group }}</b></p>
                        {% endif %}
                        {% if product.collection %}
                            <p>Тип ЮИ:       <b>{{ product.collection }}</b></p>
                        {% endif %}
                        {% if product.brand %}
                            <p>Бренд:        <b>{{ product.brand }}</b></p>
                        {% endif %}
                        {% if product.gender %}
                            <p>Гендер:       <b>{{ product.get_gender_display }}</b></p>
                        {% endif %}
                        {% if product.metal %}
                            <p>Металл:       <b>{{ product.metal }} {{ product.metal_content }}</b></p>
                        {% endif %}
                        {% if product.color %}
                            <p>Цвет:         <b>{{ product.color }}</b></p>
                        {% endif %}
                        &nbsp;
                        <p>Вес:  <b id="weigth-block"> -- </b> грамм</p>
                        <p id="size-title" style="display: none;">Размеры:</p>
                        <div id="size-block" class="row" style="margin: 0px; padding-bottom: 16px;">
                        </div>

                    </div>

                    <div class="col-3 product__block--indents">
                        <p>Цена: <b id="price-block">--</b> руб.</p>
                        <p>В наличии: <b id="in_stock">--</b> шт.</p>
                        <form id="cartForm-{{product.id}}" method="post" action="{% url 'cart:cart_add' product.id %}">
                            {% csrf_token %}
                            <input type="hidden" name="quantity" value=1 />
                            <input type="hidden" name="update" value="False" />
                            <input type="hidden" name="price" value="0" />
                            <input type="hidden" name="unit" value="796" />
                            <input type="hidden" name="size" value=0 />
                            <input type="hidden" name="weight" value=0 />
                        </form>
                        <!-- <a href="#" onclick="addToCart('cartForm-{{product.id}}');">в Корзину</a> -->
                        <div>
                            <input
                              type="button"
                              onclick="addToCart('cartForm-{{product.id}}');"
                              value="В корзину"
                              class="btn btn-outline-primary"/>
                          </div>
                    </div>

                </div>

                <ul class="nav nav-tabs product__nav--indents">
                    <li class="nav-item">
                        <a 
                            name="gems"
                            class="product-details nav-link active"
                            href="#"
                            onclick="selectProductDetails(this)"
                        >Вставки</a>
                    </li>
                    <li class="nav-item">
                        <a 
                            name="features"
                            class="product-details nav-link"
                            href="#"
                            onclick="selectProductDetails(this)"
                        >Характеристики</a>
                    </li>
                    <li class="nav-item">
                        <a 
                            name="accessories"
                            class="product-details nav-link"
                            href="#"
                            onclick="selectProductDetails(this)"
                        >Аксессуары</a>
                    </li>
                    <li class="nav-item">
                        <a 
                            name="analogues"
                            class="product-details nav-link"
                            href="#"
                            onclick="selectProductDetails(this)"
                        >Аналоги</a>
                    </li>
                </ul>

                <div id="gemsForm" style="display: block;">
                    {% include 'pages/gems.html' %}
                </div>

                <div id="featuresForm" style="display: none;">
                    
                </div>

                <div id="accessoriesForm" style="display: none;">
                    
                </div>

                <div id="analoguesForm" style="display: none;">
                    
                </div>

            </div>
        </main>
	{% endblock %}
{% endblock %}